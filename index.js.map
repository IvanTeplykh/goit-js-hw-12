{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Imports from libraries\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Pixabay API Key\nconst API_KEY = '54652097-fa33845d90f17562231f3e558';\n\n// Function to fetch images from Pixabay API\nexport async function getImagesByQuery(query, page, per_page) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: per_page, // Number of images per page\n  };\n  try {\n    // Make a GET request using Axios\n    const response = await axios({\n      method: 'get',\n      url: 'https://pixabay.com/api/',\n      params,\n    });\n    return response.data;\n  } catch (error) {\n    // Handle errors during the fetch\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n}\n","// Imports from libraries\nimport SimpleLightboxModule from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Initialize SimpleLightbox variable\nconst SimpleLightbox = SimpleLightboxModule.default || SimpleLightboxModule;\nlet lightbox;\n// Selectors\nconst jsImgTotal = document.querySelector('.js-img-total');\n\n// Function to render the gallery markup\nexport function markupGallery(images) {\n  const galleryContainer = document.querySelector('.gallery');\n  // Create HTML markup for each image\n  const galleryMarkup = images\n    .map(\n      image =>\n        `<li class=\"photo-card\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags.split(',').slice(0, 3).join(', ')}\"/>\n            </a>\n            <div class=\"info\">\n            <div class=\"info-item\">\n                <p class=\"info-item\">\n                    <b>Likes</b>${image.likes}\n                </p>\n                </div>\n                <div class=\"info-item\">\n                <p class=\"info-item\">\n                    <b>Views</b>${image.views}\n                </p>\n                </div>\n                <div class=\"info-item\">\n                <p class=\"info-item\">\n                    <b>Comments</b>${image.comments}\n                </p>\n                </div>\n                <div class=\"info-item\">\n                <p class=\"info-item\">\n                    <b>Downloads</b>${image.downloads}\n                </p>\n                </div>\n            </div>\n        </li>`\n    )\n    .join('');\n\n  // Insert markup into the gallery container\n  galleryContainer.insertAdjacentHTML('beforeend', galleryMarkup);\n\n  // Initialize or refresh SimpleLightbox\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n      closeText: '×',\n      navText: ['←', '→'],\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\n// Function to clear the gallery content\nexport function clearGallery() {\n  const galleryContainer = document.querySelector('.gallery');\n  galleryContainer.innerHTML = '';\n}\n\n// Function to show the loader\nexport function showLoader() {\n  const loaderContainer = document.querySelector('.loader');\n  loaderContainer.classList.remove('hidden');\n}\n\n// Function to hide the loader\nexport function hideLoader() {\n  const loaderContainer = document.querySelector('.loader');\n  loaderContainer.classList.add('hidden');\n}\n\n// Function to show the load more button\nexport function showLoadMoreBtn() {\n  const loadMoreBtn = document.querySelector('.load-more');\n  loadMoreBtn.classList.remove('hidden');\n}\n\n// Function to hide the load more button\nexport function hideLoadMoreBtn() {\n  const loadMoreBtn = document.querySelector('.load-more');\n  loadMoreBtn.classList.add('hidden');\n}\n\nexport function showImgTotal(images, imagesCount) {\n  const jsImgTotal = document.querySelector('.img-total');\n  imagesCount += images.hits.length;\n  jsImgTotal.textContent = `Total images: ${imagesCount}/${images.totalHits}`;\n  if (images.totalHits === imagesCount) {\n    hideLoadMoreBtn();\n    iziToast.info({\n      title: 'Info',\n      position: 'topRight',\n      message: 'Sorry, it is all images we have',\n    });\n  } else {\n    showLoadMoreBtn();\n  }\n  return imagesCount;\n}\n","// Imports from other modules and libraries\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  markupGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showImgTotal,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// DOM Elements\nconst form = document.querySelector('.form');\nconst jsSearchQuery = document.querySelector('.js-search-query');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst jsImgTotal = document.querySelector('.img-total');\n\n// Variables\nlet query = '';\nlet page = 1;\nlet imagesInPage = 15;\nlet imagesCount = 0;\n\n// Event listener for form submission\nform.addEventListener('submit', onFormSubmit);\n// Event listener for load more button click\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\n\n// Function to handle form submission\nasync function onFormSubmit(e) {\n  e.preventDefault(); // Prevent default form submission behavior\n\n  // function to clear gallery, show loader, and hide load more button\n  clearGallery();\n  showLoader();\n  hideLoadMoreBtn();\n\n  // Get and trim the search query\n  query = e.currentTarget.searchText.value.trim();\n  imagesCount = 0;\n  page = 1; // Reset page to 1\n\n  form.reset(); // Reset the form fields\n\n  // Validate the query\n  if (query === '') {\n    iziToast.warning({\n      title: 'warning',\n      position: 'topRight',\n      message: 'Please enter a search query!',\n    });\n    jsImgTotal.textContent = ``;\n    jsSearchQuery.textContent = `Search query :`;\n    clearGallery();\n    hideLoadMoreBtn(); // Hide load more button if validation fails\n    hideLoader(); // Hide loader if validation fails\n    return;\n  }\n\n  // Display the search query to the user\n  jsSearchQuery.textContent = `Search query : \"${query}\"`;\n\n  // Fetch images from the API\n  try {\n    const images = await getImagesByQuery(query, page, imagesInPage);\n\n    // Check if no images were found\n    if (images.hits.length === 0) {\n      iziToast.info({\n        title: 'Info',\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      hideLoadMoreBtn(); // Hide load more button if no images were found\n    } else {\n      // Render the gallery with the fetched images\n\n      markupGallery(images.hits);\n      imagesCount = showImgTotal(images, imagesCount);\n    }\n  } catch (error) {\n    console.log(error);\n    // Handle errors during the fetch\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message: 'Sorry, something went wrong. Please try again!',\n    });\n  } finally {\n    // Hide the loader regardless of success or failure\n    hideLoader();\n    page += 1;\n  }\n}\n\nasync function onLoadMoreClick() {\n  showLoader();\n  try {\n    const images = await getImagesByQuery(query, page, imagesInPage);\n    markupGallery(images.hits);\n    imagesCount = showImgTotal(images, imagesCount);\n    page += 1;\n    const firstCard = document.querySelector('.gallery').firstElementChild;\n    if (firstCard) {\n      const { height } = firstCard.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (AxiosError) {\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["API_KEY","getImagesByQuery","query","page","per_page","params","axios","iziToast","SimpleLightbox","SimpleLightboxModule","lightbox","markupGallery","images","galleryContainer","galleryMarkup","image","clearGallery","showLoader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","showImgTotal","imagesCount","jsImgTotal","form","jsSearchQuery","loadMoreBtn","imagesInPage","onFormSubmit","onLoadMoreClick","error","firstCard","height"],"mappings":"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"}